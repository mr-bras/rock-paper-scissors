<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Камень-ножницы-бумага</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
</head>
<body style="background-image: url(4.jpg); background-size: cover;">
    <!--
        Камень - серый
        Ножницы - оранжевые
        Бумага - белая
    -->
    <div class="col-8 mx-auto text-center mt-5">
        <button class="button light rounded-pill">Restart</button>
        <h1 class="info"><span class="move text-white">Игрок 1 ходит!</span></h1>
        <div class="row  py-5">
            <div class="col-6  py-5">
                <h1 class="text-white">Игрок 1</h1>
                <div class="choice-player-1">

                </div>
                <p class="text-white">Камень - A</p>
                <p class="text-white">Ножницы - S</p>
                <p class="text-white">Бумага - D</p>
            </div>
            <div class="col-6 py-5">
                <h1 class="text-white">Игрок 2</h1>
                <div class="choice-player-2">
                </div>
                <p class="text-white">Камень - J</p>
                <p class="text-white">Ножницы - K</p>
                <p class="text-white">Бумага - L</p>
            </div>
        </div>
    </div>
    
   <script type="text/javascript">
    let playerName = "first";
    let player1Status = null;
    let player2Status = null;
    let p1 = document.querySelector(".choice-player-1")
    let p2 = document.querySelector(".choice-player-2")
    let move = document.querySelector(".move")
    let btn = document.querySelector(".button")

    document.addEventListener("keydown", function (event) {
      if (playerName == "first"){
        if(event.code == "KeyS"){
            console.log("нажимаю на S")
            playerName = "second"
            player1Status = "scissors";
            move.innerHTML = "Игрок 2 ходит!"
      }
        else if(event.code == "KeyA"){
            console.log("нажимаю на A")
            playerName = "second"
            player1Status = "rock";
            move.innerHTML = "Игрок 2 ходит!"
      }
        else if(event.code == "KeyD"){
            console.log("нажимаю на D")
            playerName = "second"
            player1Status = "paper";
            move.innerHTML = "Игрок 2 ходит!"
      }
        else{
            console.log("не та буква")
      }
    
  } else if (playerName == "second"){
    if(event.code == "KeyJ"){
            console.log("нажимаю на J")
            playerName = "finish"
            player2Status = "rock";
      }
        else if(event.code == "KeyK"){
            console.log("нажимаю на K")
            playerName = "finish"
            player2Status = "scissors";
      }
        else if(event.code == "KeyL"){
            console.log("нажимаю на L")
            playerName = "finish"
            player2Status = "paper";
      }
        else{
            console.log("не та буква")
      }
  }
  if (playerName == "finish"){
    console.log("конец игры")
    divReaction()
    result()
  }


})
    let divReaction = function(){
        if(player1Status == "rock"){
            p1.style.backgroundImage = "url(2.jpg)"
            p1.style.backgroundSize = "100% 100%"
        }else if(player1Status == "paper"){
            p1.style.backgroundImage = "url(1.jpg)"
            p1.style.backgroundSize = "100% 100%"
        }else if(player1Status == "scissors"){
            p1.style.backgroundImage = "url(3.jpg)"
            p1.style.backgroundSize = "100% 100%"
        }
        if(player2Status == "scissors"){
            p2.style.backgroundImage = "url(3.jpg)"
            p2.style.backgroundSize = "100% 100%"
        }
        else if(player2Status == "rock"){
            p2.style.backgroundImage = "url(2.jpg)"
            p2.style.backgroundSize = "100% 100%"
        }
        else if(player2Status == "paper"){
            p2.style.backgroundImage = "url(1.jpg)"
            p2.style.backgroundSize = "100% 100%"
        }
    }
    let result =function(){
        if (player1Status == player2Status){
           console.log("ничья")
           move.innerHTML = "Ничья!"
        }
        else if(player1Status=="rock" && player2Status =="scissors"){
            console.log("1")
            move.innerHTML = "Игрок 1 победил!"
        }
        else if(player1Status=="scissors" && player2Status =="paper"){
            console.log("1")
            move.innerHTML = "Игрок 1 победил!"
        }
        else if(player1Status=="paper" && player2Status =="rock"){
            console.log("1")
            move.innerHTML = "Игрок 1 победил!"
        }
        else{
            console.log("2")
            move.innerHTML = "Игрок 2 победил!"
        }
    }
    btn.onclick = function(){
        playerName = "first"
        move.innerHTML = "Игрок 1 ходит!"
        p1.style.backgroundImage = "none"
        p2.style.backgroundImage = "none"
    }
</script>
</body>
</html>